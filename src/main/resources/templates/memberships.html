<!DOCTYPE HTML>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:sec="http://www.thymeleaf.org/thymeleaf-extras-springsecurity4">
<head th:substituteby="header :: copy"></head>
<body ng-app="membershipApp">
<nav th:substituteby="menubar :: copy"></nav>

<!--  Content container -->
<div class="container-fluid">
    <div class='row'>
        <div class='col-xs-offset-1 col-xs-10' ng-controller="MembershipJsController" data-ng-init="init()">
            <h2 class="text-center">Manage My Memberships</h2>

            <p class="text-center">Members can manage their memberships for the groupings that they belong to.</p>

            <ul class="nav nav-tabs " id="memTab">
                <li role="presentation" class="active">
                    <a href="#belong" data-toggle="tab" role="tab">
                        <!-- <span class = "step size-64"> -->
                        <i class="icon ion-android-people" id="icons"></i>
                        <!-- </span> -->
                    </a>
                </li>
                <li role="presentation">
                    <a href="#optOut" data-toggle="tab" role="tab">
                        <i class="icon ion-android-person size-64" id="icons "></i>
                    </a>
                </li>
            </ul>
            <div id="overlay" ng-show="loading">
                <div class="loader" ng-show="loading"></div>
            </div>
            <div class="tab-content">
                <div class="panel panel-default tab-pane fade in active" id="belong">
                    <div class="panel-heading" style="padding: 2px">
                        <div class="form-group">
                            <h3 class="col-md-4" style="margin-top: 5px">You belong to this/these groups</h3>

                            <div align="right" style="margin-top: 10px">
                                <input placeholder="Type to filter text..." type="text" ng-model="searchFor1"/>
                            </div>
                        </div>
                    </div>

                    <table class="table table-bordered table-condensed table-hover">
                        <thead>
                        <tr>
                            <th>Groupings</th>
                            <th>Opt out</th>
                        </tr>
                        </thead>
                        <tfoot>
                            <td colspan="6">
                                    <ul class = "pagination pull-right">
                                        <li ng-class="{disabled: currentPage=0}">
                                            <a ng-click="prevPage()">« Prev</a>
                                        </li>
                                        <li ng-repeat="n in range(membersList.length, currentPage, currentPage + gap) "
                                        ng-class="{active: n == currentPage}"
                                        ng-click="setPage()"><a ng-bind="n + 1">1</a>
                                    </li>
                                    <li ng-class="{disabled: (currentPage) == pagedItems.length - 1}">
                                        <a ng-click="nextPage()">Next »</a>
                                    </li>
                                    <!--
                                -->
                                </ul>
                            <!-- </div> -->
                            </td>
                        </tfoot>
                        <tbody>
                        <tr ng-repeat="l in pagedItems[currentPage] | filter:searchFor1">
                            <td>{{l.name}}</td>
                            <td>
                                <button id="optOutButton" class="btn btn-default btn-block" ng-click="optOut($index)">
                                    OPT OUT
                                </button>
                            </td>
                        </tr>
                        </tbody>
                    </table>
                </div>


                <div class="panel panel-default tab-pane fade" id="optOut">
                    <div class="panel-heading" style="padding: 2px">
                        <div class="form-group">
                            <h3 class="col-md-4" style="margin-top: 5px">You can opt in to this/these groups</h3>

                            <div align="right" style="margin-top: 10px">
                                <input placeholder="Type to filter text..." type="text" ng-model="searchFor2"/>
                            </div>
                        </div>
                    </div>

                    <table class="table table-bordered table-condensed table-hover">
                        <thead>
                        <tr>
                            <th>Groupings</th>
                            <th>Opt in</th>
                        </tr>
                        </thead>
                        <tbody>
                        <tr ng-repeat="o in optInList | filter:searchFor2">
                            <td>{{o.name}}</td>
                            <td>
                                <button ng-disabled="disabledOptIn($index)" class="btn btn-default btn-block"
                                        ng-click="optIn($index)">OPT IN
                                </button>
                            </td>
                        </tr>
                        </tbody>

                    </table>


                </div>
            </div>
        </div>
    </div>
</div>

<!-- / Content container. -->

<div th:substituteby="footer :: copy"></div>

</body>
</html>
